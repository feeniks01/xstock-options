2025-12-18T06:31:29.450Z [INFO] ========================================
2025-12-18T06:31:29.451Z [INFO] xStock Keeper Service Starting
2025-12-18T06:31:29.452Z [INFO] ========================================
2025-12-18T06:31:29.452Z [INFO] Configuration {"assetId":"NVDAx","cronSchedule":"0 */6 * * *","epochDuration":"604800s","quoteWait":"10000ms","strikeDelta":"500bps"}
2025-12-18T06:31:29.476Z [INFO] Wallet loaded {"pubkey":"5cyhTaQ5A7gxwF5zmpn4zJHsyiLBQV9ffPvtNPYNiLpX"}
2025-12-18T06:31:29.480Z [INFO] On-chain client initialized
2025-12-18T06:31:29.481Z [INFO] Scheduling epoch rolls: 0 */6 * * *
2025-12-18T06:31:29.482Z [INFO] Running epoch roll immediately (--run-now)
2025-12-18T06:31:29.483Z [INFO] ========================================
2025-12-18T06:31:29.483Z [INFO] Starting epoch roll {"runNumber":1}
2025-12-18T06:31:29.483Z [INFO] ========================================
2025-12-18T06:31:29.483Z [INFO] Step 1: Fetching oracle price...
2025-12-18T06:31:29.505Z [INFO] Health server listening on port 3010
2025-12-18T06:31:29.590Z [ERROR] Failed to fetch oracle price {"error":{"message":"Request failed with status code 401","name":"AxiosError","stack":"AxiosError: Request failed with status code 401\n    at settle (/Users/evan/Desktop/xstock-options/infra/keeper/node_modules/axios/lib/core/settle.js:19:12)\n    at IncomingMessage.handleStreamEnd (/Users/evan/Desktop/xstock-options/infra/keeper/node_modules/axios/lib/adapters/http.js:793:11)\n    at IncomingMessage.emit (node:events:530:35)\n    at IncomingMessage.emit (node:domain:489:12)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at processTicksAndRejections (node:internal/process/task_queues:90:21)\n    at Axios.request (/Users/evan/Desktop/xstock-options/infra/keeper/node_modules/axios/lib/core/Axios.js:45:41)\n    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n    at async fetchOraclePrice (/Users/evan/Desktop/xstock-options/infra/keeper/src/index.ts:228:26)\n    at async runEpochRoll (/Users/evan/Desktop/xstock-options/infra/keeper/src/index.ts:387:29)\n    at async main (/Users/evan/Desktop/xstock-options/infra/keeper/src/index.ts:584:9)","config":{"transitional":{"silentJSONParsing":true,"forcedJSONParsing":true,"clarifyTimeoutError":false},"adapter":["xhr","http","fetch"],"transformRequest":[null],"transformResponse":[null],"timeout":5000,"xsrfCookieName":"XSRF-TOKEN","xsrfHeaderName":"X-XSRF-TOKEN","maxContentLength":-1,"maxBodyLength":-1,"env":{},"headers":{"Accept":"application/json, text/plain, */*","User-Agent":"axios/1.13.2","Accept-Encoding":"gzip, compress, deflate, br"},"method":"get","url":"https://api.jup.ag/price/v2?ids=NVDA","allowAbsoluteUrls":true},"code":"ERR_BAD_REQUEST","status":401}}
2025-12-18T06:31:29.590Z [ERROR] Epoch roll failed {"error":{}}
2025-12-18T06:31:29.590Z [INFO] Keeper service ready
2025-12-18T06:31:29.590Z [INFO] ========================================
2025-12-18T06:37:31.461Z [INFO] ========================================
2025-12-18T06:37:31.463Z [INFO] xStock Keeper Service Starting
2025-12-18T06:37:31.463Z [INFO] ========================================
2025-12-18T06:37:31.463Z [INFO] Configuration {"assetId":"NVDAx","cronSchedule":"0 */6 * * *","epochDuration":"604800s","quoteWait":"10000ms","strikeDelta":"500bps"}
2025-12-18T06:37:31.494Z [INFO] Wallet loaded {"pubkey":"5cyhTaQ5A7gxwF5zmpn4zJHsyiLBQV9ffPvtNPYNiLpX"}
2025-12-18T06:37:31.498Z [INFO] On-chain client initialized
2025-12-18T06:37:31.500Z [INFO] Scheduling epoch rolls: 0 */6 * * *
2025-12-18T06:37:31.501Z [INFO] Running epoch roll immediately (--run-now)
2025-12-18T06:37:31.501Z [INFO] ========================================
2025-12-18T06:37:31.502Z [INFO] Starting epoch roll {"runNumber":1}
2025-12-18T06:37:31.502Z [INFO] ========================================
2025-12-18T06:37:31.502Z [INFO] Step 1: Fetching oracle price...
2025-12-18T06:37:31.525Z [INFO] Health server listening on port 3010
2025-12-18T06:37:32.075Z [WARN] Oracle call failed, using mock price for demo {"error":{"simulationResponse":{"accounts":null,"err":{"InstructionError":[0,{"Custom":6001}]},"fee":5000,"innerInstructions":null,"loadedAccountsDataSize":214670,"loadedAddresses":{"readonly":[],"writable":[]},"logs":["Program 5MnuN6ahpRSp5F3R2uXvy9pSN4TQmhSydywQSoxszuZk invoke [1]","Program log: Instruction: GetPrice","Program log: AnchorError occurred. Error Code: InvalidPriceData. Error Number: 6001. Error Message: Invalid Pyth price data format.","Program 5MnuN6ahpRSp5F3R2uXvy9pSN4TQmhSydywQSoxszuZk consumed 2759 of 200000 compute units","Program 5MnuN6ahpRSp5F3R2uXvy9pSN4TQmhSydywQSoxszuZk failed: custom program error: 0x1771"],"postBalances":[485637280,1538160,1141440,0],"postTokenBalances":[],"preBalances":[485642280,1538160,1141440,0],"preTokenBalances":[],"replacementBlockhash":null,"returnData":null,"unitsConsumed":2759}}}
2025-12-18T06:37:32.076Z [INFO] Using mock oracle price for demo {"mockPrice":"137.94"}
2025-12-18T06:37:32.076Z [INFO] Oracle price {"price":137.935016,"conf":689675}
2025-12-18T06:37:32.076Z [INFO] Step 2: Computing strike...
2025-12-18T06:37:32.076Z [INFO] Strike computed {"optionType":"CALL","spot":137.935016,"strike":144.831766,"deltaBps":500}
2025-12-18T06:37:32.076Z [INFO] Step 3: Calculating notional...
2025-12-18T06:37:32.076Z [INFO] Notional calculated {"tvl":100000,"utilizationBps":5000,"notional":50000}
2025-12-18T06:37:32.076Z [INFO] Step 4: Creating RFQ...
2025-12-18T06:37:32.087Z [INFO] RFQ created {"rfqId":"rfq_1766039852085_pvzypa"}
2025-12-18T06:37:32.087Z [INFO] Step 5: Waiting for quotes and filling...
2025-12-18T06:37:32.087Z [INFO] Waiting for quotes... {"rfqId":"rfq_1766039852085_pvzypa","waitMs":10000}
2025-12-18T06:37:42.110Z [ERROR] Failed to fill RFQ {"rfqId":"rfq_1766039852085_pvzypa","error":{"success":false,"error":"RFQ is EXPIRED"}}
2025-12-18T06:37:42.110Z [WARN] No valid quotes received, epoch roll incomplete
2025-12-18T06:37:42.110Z [INFO] Keeper service ready
2025-12-18T06:37:42.110Z [INFO] ========================================
2025-12-18T06:46:25.519Z [INFO] ========================================
2025-12-18T06:46:25.520Z [INFO] xStock Keeper Service Starting
2025-12-18T06:46:25.520Z [INFO] ========================================
2025-12-18T06:46:25.520Z [INFO] Configuration {"assetId":"NVDAx","cronSchedule":"0 */6 * * *","epochDuration":"604800s","quoteWait":"10000ms","strikeDelta":"500bps"}
2025-12-18T06:46:25.550Z [INFO] Wallet loaded {"pubkey":"5cyhTaQ5A7gxwF5zmpn4zJHsyiLBQV9ffPvtNPYNiLpX"}
2025-12-18T06:46:25.554Z [INFO] On-chain client initialized
2025-12-18T06:46:25.556Z [INFO] Scheduling epoch rolls: 0 */6 * * *
2025-12-18T06:46:25.558Z [INFO] Running epoch roll immediately (--run-now)
2025-12-18T06:46:25.558Z [INFO] ========================================
2025-12-18T06:46:25.559Z [INFO] Starting epoch roll {"runNumber":1}
2025-12-18T06:46:25.559Z [INFO] ========================================
2025-12-18T06:46:25.559Z [INFO] Step 1: Fetching oracle price...
2025-12-18T06:46:25.583Z [INFO] Health server listening on port 3010
2025-12-18T06:46:25.744Z [INFO] Fetched price from Pyth Hermes API {"assetId":"NVDAx","price":"171.73","confidence":"0.1489"}
2025-12-18T06:46:25.744Z [INFO] Oracle price {"price":171.727744,"conf":148913}
2025-12-18T06:46:25.744Z [INFO] Step 2: Computing strike...
2025-12-18T06:46:25.744Z [INFO] Strike computed {"optionType":"CALL","spot":171.727744,"strike":180.314131,"deltaBps":500}
2025-12-18T06:46:25.744Z [INFO] Step 3: Calculating notional...
2025-12-18T06:46:25.744Z [INFO] Notional calculated {"tvl":100000,"utilizationBps":5000,"notional":50000}
2025-12-18T06:46:25.744Z [INFO] Step 4: Creating RFQ...
2025-12-18T06:46:25.748Z [INFO] RFQ created {"rfqId":"rfq_1766040385747_ufo48a"}
2025-12-18T06:46:25.748Z [INFO] Step 5: Waiting for quotes and filling...
2025-12-18T06:46:25.748Z [INFO] Waiting for quotes... {"rfqId":"rfq_1766040385747_ufo48a","waitMs":10000}
2025-12-18T06:46:35.757Z [INFO] RFQ filled {"rfqId":"rfq_1766040385747_ufo48a","maker":"MockMaker0211111111111111111111111111111","premium":390534697}
2025-12-18T06:46:35.757Z [INFO] Step 6: Recording exposure and advancing epoch...
2025-12-18T06:46:36.136Z [ERROR] On-chain transaction failed {"error":{"errorLogs":["Program log: AnchorError occurred. Error Code: InstructionFallbackNotFound. Error Number: 101. Error Message: Fallback functions are not supported."],"logs":["Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY invoke [1]","Program log: AnchorError occurred. Error Code: InstructionFallbackNotFound. Error Number: 101. Error Message: Fallback functions are not supported.","Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY consumed 1967 of 200000 compute units","Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY failed: custom program error: 0x65"],"error":{"errorCode":{"code":"InstructionFallbackNotFound","number":101},"errorMessage":"Fallback functions are not supported"},"_programErrorStack":{"stack":["8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY"]}}}
2025-12-18T06:46:36.136Z [INFO] ========================================
2025-12-18T06:46:36.136Z [INFO] Epoch roll completed successfully {"rfqId":"rfq_1766040385747_ufo48a","premium":390534697,"maker":"MockMaker0211111111111111111111111111111","recordExposureTx":null,"advanceEpochTx":null}
2025-12-18T06:46:36.136Z [INFO] ========================================
2025-12-18T06:46:36.136Z [INFO] Keeper service ready
2025-12-18T06:46:36.136Z [INFO] ========================================
2025-12-18T06:50:33.965Z [INFO] ========================================
2025-12-18T06:50:33.966Z [INFO] xStock Keeper Service Starting
2025-12-18T06:50:33.966Z [INFO] ========================================
2025-12-18T06:50:33.966Z [INFO] Configuration {"assetId":"NVDAx","cronSchedule":"0 */6 * * *","epochDuration":"604800s","quoteWait":"10000ms","strikeDelta":"500bps"}
2025-12-18T06:50:33.994Z [INFO] Wallet loaded {"pubkey":"5cyhTaQ5A7gxwF5zmpn4zJHsyiLBQV9ffPvtNPYNiLpX"}
2025-12-18T06:50:33.998Z [INFO] On-chain client initialized
2025-12-18T06:50:33.999Z [INFO] Scheduling epoch rolls: 0 */6 * * *
2025-12-18T06:50:34.001Z [INFO] Running epoch roll immediately (--run-now)
2025-12-18T06:50:34.001Z [INFO] ========================================
2025-12-18T06:50:34.001Z [INFO] Starting epoch roll {"runNumber":1}
2025-12-18T06:50:34.001Z [INFO] ========================================
2025-12-18T06:50:34.003Z [INFO] Step 1: Fetching oracle price...
2025-12-18T06:50:34.027Z [INFO] Health server listening on port 3010
2025-12-18T06:50:34.245Z [INFO] Fetched price from Pyth Hermes API {"assetId":"NVDAx","price":"171.69","confidence":"0.2151"}
2025-12-18T06:50:34.245Z [INFO] Oracle price {"price":171.687919,"conf":215116}
2025-12-18T06:50:34.245Z [INFO] Step 2: Computing strike...
2025-12-18T06:50:34.245Z [INFO] Strike computed {"optionType":"CALL","spot":171.687919,"strike":180.272314,"deltaBps":500}
2025-12-18T06:50:34.245Z [INFO] Step 3: Calculating notional...
2025-12-18T06:50:34.245Z [INFO] Notional calculated {"tvl":100000,"utilizationBps":5000,"notional":50000}
2025-12-18T06:50:34.245Z [INFO] Step 4: Creating RFQ...
2025-12-18T06:50:34.249Z [INFO] RFQ created {"rfqId":"rfq_1766040634247_dkrcmo"}
2025-12-18T06:50:34.249Z [INFO] Step 5: Waiting for quotes and filling...
2025-12-18T06:50:34.249Z [INFO] Waiting for quotes... {"rfqId":"rfq_1766040634247_dkrcmo","waitMs":10000}
2025-12-18T06:50:44.254Z [INFO] RFQ filled {"rfqId":"rfq_1766040634247_dkrcmo","maker":"MockMaker0311111111111111111111111111111","premium":359789446}
2025-12-18T06:50:44.254Z [INFO] Step 6: Recording exposure and advancing epoch...
2025-12-18T06:50:44.802Z [ERROR] On-chain transaction failed {"error":{"errorLogs":["Program log: AnchorError occurred. Error Code: InstructionFallbackNotFound. Error Number: 101. Error Message: Fallback functions are not supported."],"logs":["Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY invoke [1]","Program log: AnchorError occurred. Error Code: InstructionFallbackNotFound. Error Number: 101. Error Message: Fallback functions are not supported.","Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY consumed 1967 of 200000 compute units","Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY failed: custom program error: 0x65"],"error":{"errorCode":{"code":"InstructionFallbackNotFound","number":101},"errorMessage":"Fallback functions are not supported"},"_programErrorStack":{"stack":["8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY"]}}}
2025-12-18T06:50:44.802Z [INFO] ========================================
2025-12-18T06:50:44.802Z [INFO] Epoch roll completed successfully {"rfqId":"rfq_1766040634247_dkrcmo","premium":359789446,"maker":"MockMaker0311111111111111111111111111111","recordExposureTx":null,"advanceEpochTx":null}
2025-12-18T06:50:44.802Z [INFO] ========================================
2025-12-18T06:50:44.802Z [INFO] Keeper service ready
2025-12-18T06:50:44.802Z [INFO] ========================================
2025-12-18T06:54:03.286Z [INFO] ========================================
2025-12-18T06:54:03.287Z [INFO] xStock Keeper Service Starting
2025-12-18T06:54:03.288Z [INFO] ========================================
2025-12-18T06:54:03.288Z [INFO] Configuration {"assetId":"NVDAx","cronSchedule":"0 */6 * * *","epochDuration":"604800s","quoteWait":"10000ms","strikeDelta":"500bps"}
2025-12-18T06:54:03.317Z [INFO] Wallet loaded {"pubkey":"5cyhTaQ5A7gxwF5zmpn4zJHsyiLBQV9ffPvtNPYNiLpX"}
2025-12-18T06:54:03.322Z [INFO] On-chain client initialized
2025-12-18T06:54:03.323Z [INFO] Scheduling epoch rolls: 0 */6 * * *
2025-12-18T06:54:03.325Z [INFO] Running epoch roll immediately (--run-now)
2025-12-18T06:54:03.325Z [INFO] ========================================
2025-12-18T06:54:03.325Z [INFO] Starting epoch roll {"runNumber":1}
2025-12-18T06:54:03.325Z [INFO] ========================================
2025-12-18T06:54:03.325Z [INFO] Step 1: Fetching oracle price...
2025-12-18T06:54:03.349Z [INFO] Health server listening on port 3010
2025-12-18T06:54:03.557Z [INFO] Fetched price from Pyth Hermes API {"assetId":"NVDAx","price":"171.66","confidence":"0.1851"}
2025-12-18T06:54:03.557Z [INFO] Oracle price {"price":171.660682,"conf":185092}
2025-12-18T06:54:03.557Z [INFO] Step 2: Computing strike...
2025-12-18T06:54:03.557Z [INFO] Strike computed {"optionType":"CALL","spot":171.660682,"strike":180.243716,"deltaBps":500}
2025-12-18T06:54:03.557Z [INFO] Step 3: Calculating notional...
2025-12-18T06:54:03.557Z [INFO] Notional calculated {"tvl":100000,"utilizationBps":5000,"notional":50000}
2025-12-18T06:54:03.557Z [INFO] Step 4: Creating RFQ...
2025-12-18T06:54:03.562Z [INFO] RFQ created {"rfqId":"rfq_1766040843560_vmzulh"}
2025-12-18T06:54:03.562Z [INFO] Step 5: Waiting for quotes and filling...
2025-12-18T06:54:03.562Z [INFO] Waiting for quotes... {"rfqId":"rfq_1766040843560_vmzulh","waitMs":10000}
2025-12-18T06:54:13.570Z [INFO] RFQ filled {"rfqId":"rfq_1766040843560_vmzulh","maker":"MockMaker0211111111111111111111111111111","premium":361063205}
2025-12-18T06:54:13.570Z [INFO] Step 6: Recording exposure and advancing epoch...
2025-12-18T06:54:13.930Z [ERROR] On-chain transaction failed {"error":{"errorLogs":["Program log: AnchorError caused by account: vault. Error Code: ConstraintSeeds. Error Number: 2006. Error Message: A seeds constraint was violated.","Program log: Left:","Program log: 3v8cc4nYDYQDzVbyPGMDQnCuDKHNmZAkT37DgNz4yDyP","Program log: Right:","Program log: 2EY6K9bAm74vHbdbkEzmYsbqVZUaUaaN7f26bHaUJmZH"],"logs":["Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY invoke [1]","Program log: Instruction: RecordNotionalExposure","Program log: AnchorError caused by account: vault. Error Code: ConstraintSeeds. Error Number: 2006. Error Message: A seeds constraint was violated.","Program log: Left:","Program log: 3v8cc4nYDYQDzVbyPGMDQnCuDKHNmZAkT37DgNz4yDyP","Program log: Right:","Program log: 2EY6K9bAm74vHbdbkEzmYsbqVZUaUaaN7f26bHaUJmZH","Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY consumed 5007 of 200000 compute units","Program 8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY failed: custom program error: 0x7d6"],"error":{"errorCode":{"code":"ConstraintSeeds","number":2006},"errorMessage":"A seeds constraint was violated","comparedValues":["3v8cc4nYDYQDzVbyPGMDQnCuDKHNmZAkT37DgNz4yDyP","2EY6K9bAm74vHbdbkEzmYsbqVZUaUaaN7f26bHaUJmZH"],"origin":"vault"},"_programErrorStack":{"stack":["8gJHdrseXDiqUuBUBtMuNgn6G6GoLZ8oLiPHwru7NuPY"]}}}
2025-12-18T06:54:13.930Z [INFO] ========================================
2025-12-18T06:54:13.930Z [INFO] Epoch roll completed successfully {"rfqId":"rfq_1766040843560_vmzulh","premium":361063205,"maker":"MockMaker0211111111111111111111111111111","recordExposureTx":null,"advanceEpochTx":null}
2025-12-18T06:54:13.930Z [INFO] ========================================
2025-12-18T06:54:13.930Z [INFO] Keeper service ready
2025-12-18T06:54:13.930Z [INFO] ========================================
